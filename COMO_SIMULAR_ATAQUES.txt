================================================================================
    C√ìMO SIMULAR ATAQUES PARA PROBAR EL IPS
================================================================================

Este documento explica c√≥mo simular diferentes tipos de ataques para
probar y validar que el sistema IPS est√° funcionando correctamente.

‚ö†Ô∏è  ADVERTENCIA IMPORTANTE:
   - Usar SOLO en entornos controlados
   - Usar SOLO en tu propia red/sistema
   - NO usar en sistemas de producci√≥n sin autorizaci√≥n
   - Estos ataques son para PRUEBAS EDUCATIVAS √∫nicamente

================================================================================
M√âTODO 1: USAR EL SCRIPT SIMULADOR (RECOMENDADO)
================================================================================

El proyecto incluye un script Python para simular ataques:

1. Abre una terminal en la carpeta del proyecto

2. Ejecuta el simulador:
   
   python IPS/simularAtaques.py

3. Selecciona el tipo de ataque:
   - Port Scan
   - Brute Force HTTP
   - SQL Injection
   - XSS Attack
   - DDoS B√°sico
   - Simulaci√≥n Completa (todos)

4. En OTRA terminal, ejecuta el capturador:
   
   python IPS/capturaRed.py

5. Observa las alertas en:
   - La consola del capturador
   - La interfaz web (IPS/IPS.html)

================================================================================
M√âTODO 2: SIMULACIONES MANUALES
================================================================================

A) PORT SCAN (Escaneo de Puertos)

Usando Python:
    import socket
    for puerto in [80, 443, 22, 21, 25, 3306]:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(0.5)
        resultado = sock.connect_ex(("127.0.0.1", puerto))
        sock.close()

Usando herramientas:
    - nmap -p 80,443,22 127.0.0.1
    - netcat: nc -zv 127.0.0.1 80-100

B) BRUTE FORCE HTTP

Crear un script que haga m√∫ltiples conexiones HTTP r√°pidas:
    import socket
    import time
    
    for i in range(50):
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect(("127.0.0.1", 80))
        sock.send(b"GET /login HTTP/1.1\r\nHost: localhost\r\n\r\n")
        sock.close()
        time.sleep(0.1)

C) SQL INJECTION

Enviar requests HTTP con payloads SQL:
    import socket
    
    payloads = ["' OR '1'='1", "admin'--", "' UNION SELECT NULL--"]
    for payload in payloads:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect(("127.0.0.1", 80))
        request = f"GET /search?q={payload} HTTP/1.1\r\nHost: localhost\r\n\r\n"
        sock.send(request.encode())
        sock.close()

D) XSS ATTACK

Enviar requests con scripts maliciosos:
    import socket
    
    payloads = [
        "<script>alert('XSS')</script>",
        "<img src=x onerror=alert('XSS')>",
        "<svg/onload=alert('XSS')>"
    ]
    for payload in payloads:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.connect(("127.0.0.1", 80))
        request = f"GET /search?q={payload} HTTP/1.1\r\nHost: localhost\r\n\r\n"
        sock.send(request.encode())
        sock.close()

E) DDOS B√ÅSICO

M√∫ltiples conexiones simult√°neas:
    import socket
    import threading
    
    def ataque():
        for _ in range(20):
            try:
                sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
                sock.connect(("127.0.0.1", 80))
                sock.send(b"GET / HTTP/1.1\r\nHost: localhost\r\n\r\n")
                sock.close()
            except:
                pass
    
    # Lanzar 10 threads simult√°neos
    for _ in range(10):
        threading.Thread(target=ataque).start()

================================================================================
M√âTODO 3: USAR HERRAMIENTAS EXTERNAS
================================================================================

A) NMAP (Port Scanning)
    nmap -p 1-1000 127.0.0.1
    nmap -sS -p 80,443,22 127.0.0.1

B) HYDRA (Brute Force)
    hydra -l admin -P passwords.txt 127.0.0.1 http-get /login

C) SQLMAP (SQL Injection)
    sqlmap -u "http://127.0.0.1/search?q=test" --batch

D) BURP SUITE (Web Attacks)
    - Interceptar tr√°fico
    - Modificar requests
    - Enviar payloads maliciosos

E) APACHE BENCH (DDoS b√°sico)
    ab -n 1000 -c 10 http://127.0.0.1/

================================================================================
CONFIGURACI√ìN PARA PROBAR
================================================================================

1. CONFIGURAR UN SERVIDOR WEB LOCAL (Opcional pero recomendado)

   Opci√≥n A - Python HTTP Server:
       python -m http.server 80
   
   Opci√≥n B - Apache/Nginx:
       Configurar servidor web en localhost:80
   
   Opci√≥n C - Aplicaci√≥n web simple:
       Cualquier aplicaci√≥n web que escuche en un puerto

2. EJECUTAR EL CAPTURADOR IPS

   En una terminal:
       python IPS/capturaRed.py
   
   Debe mostrar:
       ‚úÖ Sistema de detecci√≥n ML activado
       üì° Capturando tr√°fico...

3. EJECUTAR EL SIMULADOR DE ATAQUES

   En otra terminal:
       python IPS/simularAtaques.py
   
   Selecciona el tipo de ataque

4. OBSERVAR RESULTADOS

   En la consola del capturador ver√°s:
       üö® ALERTA: Web Attack - Brute Force (XX.X%)
   
   En la interfaz web ver√°s:
       - Tr√°fico resaltado en rojo
       - Secci√≥n de alertas con detalles

================================================================================
TIPOS DE ATAQUES QUE PUEDES SIMULAR
================================================================================

1. PORT SCAN
   - Qu√© hace: Intenta conectar a m√∫ltiples puertos
   - Patr√≥n: Muchos flujos cortos, m√∫ltiples puertos
   - Detectado como: Port Scan (si el modelo fue entrenado con ese dataset)

2. BRUTE FORCE HTTP
   - Qu√© hace: M√∫ltiples intentos de login r√°pidos
   - Patr√≥n: Muchos paquetes peque√±os, muchos SYN
   - Detectado como: Web Attack - Brute Force

3. SQL INJECTION
   - Qu√© hace: Env√≠a payloads SQL maliciosos
   - Patr√≥n: Tama√±os inusuales, headers largos
   - Detectado como: Web Attack - SQL Injection

4. XSS ATTACK
   - Qu√© hace: Env√≠a scripts maliciosos
   - Patr√≥n: Similar a SQL Injection
   - Detectado como: Web Attack - XSS

5. DDOS B√ÅSICO
   - Qu√© hace: M√∫ltiples requests simult√°neos
   - Patr√≥n: Enorme cantidad de paquetes, alta tasa
   - Detectado como: DDoS (si el modelo fue entrenado con ese dataset)

================================================================================
EJEMPLO DE FLUJO COMPLETO
================================================================================

Terminal 1 - Servidor Web (opcional):
    python -m http.server 80

Terminal 2 - Capturador IPS:
    python IPS/capturaRed.py

Terminal 3 - Simulador de Ataques:
    python IPS/simularAtaques.py
    > Selecciona opci√≥n 6 (Simulaci√≥n Completa)

Resultado esperado:
    - En Terminal 2 ver√°s m√∫ltiples alertas
    - En la interfaz web ver√°s tr√°fico sospechoso resaltado
    - En alertas.json se guardar√°n las detecciones

================================================================================
TROUBLESHOOTING
================================================================================

PROBLEMA: No se detectan ataques
SOLUCI√ìN:
    - Verifica que el modelo est√© entrenado
    - Aseg√∫rate de que capturaRed.py est√© ejecut√°ndose
    - Verifica que el tr√°fico llegue al capturador
    - Revisa que el modelo fue entrenado con el tipo de ataque que simulas

PROBLEMA: "Connection refused" al simular
SOLUCI√ìN:
    - Aseg√∫rate de que hay un servicio escuchando en el puerto
    - O usa un servidor web local (python -m http.server)
    - O cambia el puerto objetivo

PROBLEMA: Muchos falsos positivos
SOLUCI√ìN:
    - Es normal, el modelo puede ser sensible
    - Ajusta los hiperpar√°metros del modelo
    - Entrena con m√°s datos benignos

PROBLEMA: No aparecen alertas en la interfaz
SOLUCI√ìN:
    - Verifica que alertas.json se est√© actualizando
    - Refresca la p√°gina web
    - Revisa la consola del navegador (F12)

================================================================================
CONSIDERACIONES √âTICAS Y LEGALES
================================================================================

‚ö†Ô∏è  IMPORTANTE:

1. SOLO usa estas herramientas en:
   - Tu propia red
   - Sistemas que posees
   - Entornos de prueba controlados
   - Con autorizaci√≥n expl√≠cita

2. NO uses estas herramientas para:
   - Atacar sistemas ajenos
   - Realizar actividades ilegales
   - Comprometer sistemas sin autorizaci√≥n

3. RESPONSABILIDAD:
   - El uso de estas herramientas es bajo tu responsabilidad
   - Aseg√∫rate de cumplir con las leyes locales
   - Solo para fines educativos y de prueba

4. RECOMENDACI√ìN:
   - Usa una m√°quina virtual o contenedor aislado
   - No ejecutes en sistemas de producci√≥n
   - A√≠sla el tr√°fico de red si es posible

================================================================================
MEJORAR LA DETECCI√ìN
================================================================================

Para que el sistema detecte mejor los ataques simulados:

1. Entrena con m√∫ltiples datasets del CICIDS2017
2. Ajusta los par√°metros del simulador (m√°s requests, m√°s r√°pido)
3. Usa patrones m√°s realistas de ataque
4. Combina m√∫ltiples tipos de ataques simult√°neamente

================================================================================

